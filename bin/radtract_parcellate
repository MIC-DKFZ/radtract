#!/usr/bin/env python

import argparse
from radtract import parcellation
import nibabel as nib


def main():
    parser = argparse.ArgumentParser(description='RadTract Tract Parcellation')
    parser.add_argument('--streamlines', type=str, help='Input streamline file')
    parser.add_argument('--envelope', type=str, help='Input streamline envelope file', default=None)
    parser.add_argument('--start', type=str, help='Input binary start region file', default=None)
    parser.add_argument('--num_parcels', type=int, help='Number of parcels (0 for automatic estimation)', default=None)
    parser.add_argument('--type', type=str, help='type of parcellation (\'hyperplane\' or \'centerline\')', default='hyperplane')
    parser.add_argument('--output', type=str, help='Output parcellation image file')
    args = parser.parse_args()

    parcellation.parcellate_tract(streamlines=args.streamlines,
                                  parcellation_type=args.type,
                                  binary_envelope=args.envelope,
                                  num_parcels=args.num_parcels,
                                  start_region=args.start,
                                  out_parcellation_filename=args.output)


if __name__ == '__main__':
    main()
